# دليل التثبيت والتشغيل - نظام بناء التقارير الديناميكي

## المتطلبات الأساسية

قبل البدء، تأكد من تثبيت المتطلبات التالية على جهازك:

### 1. Node.js
- **الإصدار المطلوب**: Node.js 18.x أو أحدث
- **التحقق من التثبيت**:
  ```bash
  node --version
  ```
- **التثبيت**: إذا لم يكن مثبتاً، قم بتحميله من [nodejs.org](https://nodejs.org/)

### 2. npm (Node Package Manager)
- عادة ما يأتي مع Node.js
- **التحقق من التثبيت**:
  ```bash
  npm --version
  ```

### 3. Git (اختياري)
- للتطوير والنسخ الاحتياطي
- **التحقق من التثبيت**:
  ```bash
  git --version
  ```

---

## خطوات التثبيت والتشغيل

### الخطوة 1: الانتقال إلى مجلد المشروع

افتح Terminal (أو Command Prompt على Windows) وانتقل إلى مجلد المشروع:

```bash
cd /Users/ahmed/Desktop/cleanlife/reports
```

أو على Windows:
```bash
cd C:\path\to\reports
```

### الخطوة 2: تثبيت المكتبات والتبعيات

#### الطريقة الأولى: التثبيت التلقائي (موصى به)

**على macOS/Linux:**
```bash
./INSTALL.sh
```

**على Windows:**
```cmd
INSTALL.bat
```

السكريبت سيقوم تلقائياً بـ:
- التحقق من تثبيت Node.js و npm
- تنظيف الكاش
- حذف التثبيتات القديمة
- تثبيت جميع المكتبات

#### الطريقة الثانية: التثبيت اليدوي

قم بتثبيت جميع المكتبات المطلوبة:

```bash
npm install
```

**ملاحظات مهمة:**
- قد تستغرق هذه العملية بضع دقائق
- تأكد من وجود اتصال بالإنترنت
- إذا واجهت أخطاء في الصلاحيات، جرب:
  ```bash
  sudo npm install
  ```
  (على macOS/Linux فقط)

**المكتبات التي سيتم تثبيتها:**
- Next.js 14 - إطار العمل الرئيسي
- React 18 - مكتبة واجهة المستخدم
- TypeScript - للبرمجة الآمنة
- Tailwind CSS - للتصميم
- jsPDF - لتوليد ملفات PDF
- Zustand - لإدارة الحالة
- react-icons - للأيقونات

### الخطوة 3: التحقق من التثبيت

بعد اكتمال التثبيت، يجب أن ترى مجلد `node_modules` في المشروع. للتحقق:

```bash
ls node_modules
```

### الخطوة 4: تشغيل المشروع

قم بتشغيل خادم التطوير:

```bash
npm run dev
```

**النتيجة المتوقعة:**
```
> dynamic-report-builder@1.0.0 dev
> next dev

  ▲ Next.js 14.0.4
  - Local:        http://localhost:3000
  - ready started server on 0.0.0.0:3000
```

### الخطوة 5: فتح التطبيق في المتصفح

افتح متصفح الويب وانتقل إلى:

```
http://localhost:3000
```

يجب أن ترى الصفحة الرئيسية مع قوالب التقارير الجاهزة.

---

## أوامر المشروع المتاحة

### التطوير (Development)
```bash
npm run dev
```
- يشغل خادم التطوير
- يعيد التحميل تلقائياً عند التعديل
- متاح على `http://localhost:3000`

### البناء للإنتاج (Production Build)
```bash
npm run build
```
- يبني المشروع للإنتاج
- يحسّن الأداء
- يقلل حجم الملفات

### تشغيل النسخة الإنتاجية
```bash
npm start
```
- يشغل النسخة المبنية للإنتاج
- يتطلب تشغيل `npm run build` أولاً

### فحص الأخطاء (Linting)
```bash
npm run lint
```
- يفحص الكود بحثاً عن الأخطاء
- يتحقق من جودة الكود

---

## استكشاف الأخطاء وحلها

### مشكلة: `npm install` فشل

**الحلول:**
1. **مسح الكاش**:
   ```bash
   npm cache clean --force
   npm install
   ```

2. **حذف node_modules وإعادة التثبيت**:
   ```bash
   rm -rf node_modules package-lock.json
   npm install
   ```

3. **استخدام yarn بدلاً من npm**:
   ```bash
   yarn install
   yarn dev
   ```

### مشكلة: المنفذ 3000 مستخدم

**الحل:**
```bash
# على macOS/Linux
lsof -ti:3000 | xargs kill -9

# أو استخدم منفذ آخر
PORT=3001 npm run dev
```

### مشكلة: أخطاء TypeScript

**الحل:**
```bash
# إعادة تثبيت types
npm install --save-dev @types/node @types/react @types/react-dom
```

### مشكلة: Tailwind CSS لا يعمل

**الحل:**
```bash
# إعادة بناء CSS
npm run build
```

---

## البنية الأساسية للمشروع

```
reports/
├── app/                    # صفحات Next.js
│   ├── page.tsx           # الصفحة الرئيسية
│   ├── editor/            # صفحة المحرر
│   └── layout.tsx         # التخطيط الرئيسي
├── components/            # مكونات React
│   ├── TemplateSelector.tsx
│   ├── EditorLayout.tsx
│   └── ...
├── lib/                   # المكتبات والخدمات
│   ├── store.ts           # إدارة الحالة
│   ├── pdfGenerator.ts    # توليد PDF
│   └── utils.ts           # وظائف مساعدة
├── templates/             # القوالب الجاهزة
├── types/                # تعريفات TypeScript
├── package.json          # إعدادات المشروع
└── README.md            # ملف README
```

---

## خطوات الاستخدام الأولى

### 1. اختيار قالب
- من الصفحة الرئيسية، اختر أحد القوالب الجاهزة
- اضغط على "اختيار" للبدء

### 2. إدخال البيانات
- في لوحة "البيانات" (الجانب الأيمن)
- أدخل القيم للمتغيرات
- أو استخدم JSON لإدخال البيانات دفعة واحدة

### 3. تعديل الأقسام
- اضغط على قسم في المعاينة
- استخدم لوحة "التحرير" لتعديل الأنماط

### 4. تصدير PDF
- اضغط على زر "تصدير PDF"
- سيتم تنزيل الملف تلقائياً

---

## التطوير والتخصيص

### إضافة قالب جديد

1. أنشئ ملف في `templates/`:
   ```typescript
   // templates/my-template.ts
   export const myTemplate: ReportTemplate = {
     id: 'my-template-001',
     name: 'قالبي الجديد',
     // ...
   };
   ```

2. أضفه إلى `templates/index.ts`

### تخصيص الألوان

عدّل `tailwind.config.js`:
```javascript
colors: {
  primary: {
    500: '#your-color',
  },
}
```

---

## الدعم والمساعدة

### الملفات المرجعية
- `README.md` - نظرة عامة
- `USAGE.md` - دليل الاستخدام
- `ARCHITECTURE.md` - البنية المعمارية

### المشاكل الشائعة
- راجع قسم "استكشاف الأخطاء" أعلاه
- تحقق من إصدار Node.js (يجب أن يكون 18+)

---

## ملاحظات مهمة

1. **البيئة**: المشروع مصمم للعمل على Node.js 18+
2. **المتصفح**: يدعم جميع المتصفحات الحديثة (Chrome, Firefox, Safari, Edge)
3. **اللغة**: النظام يدعم اللغة العربية بالكامل (RTL)
4. **التخزين**: البيانات حالياً في الذاكرة فقط (سيتم إضافة قاعدة بيانات لاحقاً)

---

## الخطوات التالية بعد التثبيت

1. ✅ تثبيت المكتبات (`npm install`)
2. ✅ تشغيل المشروع (`npm run dev`)
3. ✅ فتح المتصفح (`http://localhost:3000`)
4. ✅ اختيار قالب وإنشاء تقرير تجريبي
5. ✅ تصدير PDF والتحقق من النتيجة

---

## معلومات إضافية

- **المطور**: نظام بناء التقارير الديناميكي
- **الإصدار**: 1.0.0
- **الترخيص**: خاص
- **التحديث الأخير**: 2024

---

**تم التحديث**: $(date)
**آخر مراجعة**: $(date)

